# Harp: High-level n-dimensional array processing library

[![crates.io](https://img.shields.io/crates/v/harp.svg)](https://crates.io/crates/harp)
[![Build Status](https://github.com/uthre/harp/actions/workflows/rust.yml/badge.svg)](https://github.com/uthre/harp/actions/workflows/rust.yml)

Harpã¯ã€é«˜ãƒ¬ãƒ™ãƒ«ãªNæ¬¡å…ƒé…åˆ—å‡¦ç†ã®ãŸã‚ã®Rustè£½ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ãƒ†ãƒ³ã‚½ãƒ«è¨ˆç®—ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰ã€æœ€é©åŒ–ã€è‡ªå‹•å¾®åˆ†ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã€æ©Ÿæ¢°å­¦ç¿’ã‚„æ•°å€¤è¨ˆç®—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã‚’å¼·åŠ›ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

## âœ¨ Features

*   **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯èƒ½ãªãƒ†ãƒ³ã‚½ãƒ«è¨ˆç®—ã‚°ãƒ©ãƒ•:** åŠ¹ç‡çš„ãªè¨ˆç®—å®Ÿè¡Œã®ãŸã‚ã®ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
*   **è»½é‡ãªã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚»ãƒƒãƒˆ:** [Tinygrad](https://github.com/tinygrad/tinygrad/tree/master)ã‚„[luminal](https://github.com/jafioti/luminal)ã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚ŒãŸã€æœ€å°é™ã‹ã¤å¼·åŠ›ãªã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚
*   **å®¹æ˜“ãªãƒ‡ãƒã‚¤ã‚¹ã‚µãƒãƒ¼ãƒˆæ‹¡å¼µ:** ãƒˆãƒ¬ã‚¤ãƒˆå®Ÿè£…ã«ã‚ˆã‚Šã€æ§˜ã€…ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ‡ãƒã‚¤ã‚¹ã¸ã®å¯¾å¿œã‚’ç°¡å˜ã«è¿½åŠ ã§ãã¾ã™ã€‚
*   **ã‚°ãƒ©ãƒ•æœ€é©åŒ–:** è¨ˆç®—ã‚°ãƒ©ãƒ•ã®æœ€é©åŒ–ã«ã‚ˆã‚Šã€å®Ÿè¡ŒåŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚
*   **ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼èåˆ:** ãƒ¡ãƒ¢ãƒªã‚¢ã‚¯ã‚»ã‚¹ã‚’å‰Šæ¸›ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€å¤§åŒ–ã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼èåˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
*   **è‡ªå‹•å¾®åˆ†:** è¤‡é›‘ãªãƒ¢ãƒ‡ãƒ«ã®å‹¾é…è¨ˆç®—ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚

## ğŸš€ Getting Started

Harpã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã™ã‚‹ã«ã¯ã€`Cargo.toml`ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

```toml
[dependencies]
harp = "0.1.0" # æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ç½®ãæ›ãˆã¦ãã ã•ã„
```

### ä½¿ç”¨ä¾‹

ç°¡å˜ãªãƒ†ãƒ³ã‚½ãƒ«è¨ˆç®—ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã—ã€å®Ÿè¡Œã™ã‚‹ä¾‹ã§ã™ã€‚

```rust
use harp::prelude::*;
use std::sync::{Arc, Mutex};

fn main() {
    let graph = Arc::new(Mutex::new(Graph::new()));
    let shape = ShapeTracker::full(vec![2.into(), 3.into()]);

    // å…¥åŠ›ãƒ†ãƒ³ã‚½ãƒ«ã®å®šç¾©
    let a = Graph::new_input(graph.clone(), shape.clone());
    let b = Graph::new_input(graph.clone(), shape.clone());

    // ãƒ†ãƒ³ã‚½ãƒ«æ¼”ç®—
    let c = &a + &b; // a + b

    // ã‚°ãƒ©ãƒ•ã®å‡ºåŠ›ã‚’è¨­å®š
    graph.lock().unwrap().add_output(&c);

    // ã‚°ãƒ©ãƒ•ã®å®Ÿè¡Œ (Interpreterã‚’ä½¿ç”¨)
    let mut interpreter = Interpreter::new();
    let result = interpreter.evaluate(
        c.node_index,
        &graph.lock().unwrap().graph,
        &std::collections::HashMap::new(),
        &std::collections::HashMap::new(),
    ).unwrap();

    println!("Result: {:?}", result);
}
```

## ğŸ—ºï¸ Roadmap

*   ã‚ˆã‚Šå¤šãã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®å®Ÿè£…
*   æ§˜ã€…ãªãƒ‡ãƒã‚¤ã‚¹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚µãƒãƒ¼ãƒˆ (CUDA, OpenCLãªã©)
*   é«˜åº¦ãªã‚°ãƒ©ãƒ•æœ€é©åŒ–ãƒ‘ã‚¹ã®è¿½åŠ 
*   ã‚ˆã‚Šä½¿ã„ã‚„ã™ã„APIã®æä¾›

## ğŸ¤ Contributing

Harpã¸ã®è²¢çŒ®ã‚’æ­“è¿ã—ã¾ã™ï¼ãƒã‚°å ±å‘Šã€æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ã€ã©ã®ã‚ˆã†ãªå½¢ã§ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚è©³ç´°ã¯`CONTRIBUTING.md` (æº–å‚™ä¸­) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“„ License

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯Apacheãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚è©³ç´°ã¯`LICENSE`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
